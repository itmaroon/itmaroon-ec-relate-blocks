(()=>{"use strict";var e,t={86(){const e=window.wp.i18n,t=window.wp.blocks,l=window.React;var a;function r(){return r=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var l=arguments[t];for(var a in l)({}).hasOwnProperty.call(l,a)&&(e[a]=l[a])}return e},r.apply(null,arguments)}var o=function(e){return l.createElement("svg",r({xmlns:"http://www.w3.org/2000/svg",width:100,height:100,viewBox:"0 0 75 75"},e),a||(a=l.createElement("defs",null,l.createElement("clipPath",{id:"cart_svg__a"},l.createElement("path",{d:"M9.75 0H53v75H9.75Zm0 0"})),l.createElement("clipPath",{id:"cart_svg__b"},l.createElement("path",{d:"M21 19h44.25v37H21Zm0 0"})))),l.createElement("path",{d:"M0 0h75v75H0z",style:{fill:"#fff",fillOpacity:1,stroke:"none"}}),l.createElement("path",{d:"M0 0h75v75H0z",style:{fill:"#fff",fillOpacity:1,stroke:"none"}}),l.createElement("path",{d:"M58.695 58.7a2.446 2.446 0 1 0 .002 4.888 2.446 2.446 0 0 0-.002-4.889m0 0",style:{stroke:"none",fillRule:"nonzero",fill:"#000",fillOpacity:1}}),l.createElement("g",{clipPath:"url(#cart_svg__a)"},l.createElement("path",{d:"M13.043 9.781h39.133V6.523c0-3.59-2.938-6.523-6.524-6.523H16.305C12.715 0 9.78 2.934 9.78 6.523V68.48c0 3.59 2.934 6.524 6.524 6.524h29.347c3.586 0 6.524-2.934 6.524-6.524v-6.52H13.043Zm13.816 56.832h8.235a1.624 1.624 0 1 1 0 3.246h-8.235a1.625 1.625 0 0 1-1.625-1.62c0-.9.73-1.626 1.625-1.626m0 0",style:{stroke:"none",fillRule:"nonzero",fill:"#000",fillOpacity:1}})),l.createElement("g",{clipPath:"url(#cart_svg__b)"},l.createElement("path",{d:"M59.188 45.652a3.26 3.26 0 0 0 3.226-2.738L65.22 26.09H35.348l-4.727-5.914a1.63 1.63 0 0 0-1.273-.61h-6.524a1.63 1.63 0 0 0 0 3.262h5.738L33 28.375l2.871 17.277v4.895a4.895 4.895 0 0 0 4.89 4.89h19.567a1.63 1.63 0 0 0 0-3.261H40.762c-.903 0-1.633-.73-1.633-1.63v-4.894Zm-5.383-3.257h-9.782a1.617 1.617 0 0 1-1.632-1.633c0-.914.718-1.63 1.632-1.63h9.782a1.61 1.61 0 0 1 1.629 1.63c0 .914-.715 1.633-1.63 1.633m-13.043-9.786h16.304c.914 0 1.63.72 1.63 1.633 0 .91-.716 1.63-1.63 1.63H40.762a1.616 1.616 0 0 1-1.633-1.63c0-.914.719-1.633 1.633-1.633m0 0",style:{stroke:"none",fillRule:"nonzero",fill:"#000",fillOpacity:1}})))};const i=window.wp.components,n=window.ReactJSXRuntime,c=({fieldType:t,selectedFields:l,setSelectedFields:a})=>{const r=[{key:"title",label:(0,e.__)("Title","itmaroon-ec-relate-blocks"),block:"itmar/design-title"},{key:"description",label:(0,e.__)("Description (plain)","itmaroon-ec-relate-blocks"),block:"core/paragraph"},{key:"descriptionHtml",label:(0,e.__)("Description (HTML)","itmaroon-ec-relate-blocks"),block:"core/paragraph"},{key:"vendor",label:(0,e.__)("Vendor","itmaroon-ec-relate-blocks"),block:"itmar/design-title"},{key:"productType",label:(0,e.__)("Product Type","itmaroon-ec-relate-blocks"),block:"itmar/design-title"},{key:"handle",label:(0,e.__)("Handle (Slug)","itmaroon-ec-relate-blocks"),block:"itmar/design-title"},{key:"tags",label:(0,e.__)("Tags","itmaroon-ec-relate-blocks"),block:"itmar/design-title"},{key:"availableForSale",label:(0,e.__)("Available for Sale","itmaroon-ec-relate-blocks"),block:"itmar/design-title"},{key:"quantityAvailable",label:(0,e.__)("Quantity Available","itmaroon-ec-relate-blocks"),block:"itmar/design-title"},{key:"price",label:(0,e.__)("Price","itmaroon-ec-relate-blocks"),block:"itmar/design-title"},{key:"compareAtPrice",label:(0,e.__)("Compare at Price (Original)","itmaroon-ec-relate-blocks"),block:"itmar/design-title"},{key:"currencyCode",label:(0,e.__)("Currency Code","itmaroon-ec-relate-blocks"),block:"itmar/design-title"},{key:"image",label:(0,e.__)("Main Image","itmaroon-ec-relate-blocks"),block:"core/image"},{key:"images",label:(0,e.__)("All Images","itmaroon-ec-relate-blocks"),block:"itmar/slide-mv"},{key:"variants",label:(0,e.__)("Variants (Options)","itmaroon-ec-relate-blocks"),block:"itmar/design-title"},{key:"sku",label:(0,e.__)("SKU","itmaroon-ec-relate-blocks"),block:"itmar/design-title"},{key:"onlineStoreUrl",label:(0,e.__)("Online Store URL","itmaroon-ec-relate-blocks"),block:"itmar/design-title"},{key:"createdAt",label:(0,e.__)("Created At","itmaroon-ec-relate-blocks"),block:"itmar/design-title"},{key:"updatedAt",label:(0,e.__)("Updated At","itmaroon-ec-relate-blocks"),block:"itmar/design-title"}],o=[{key:"title",label:(0,e.__)("Title","itmaroon-ec-relate-blocks"),block:"itmar/design-title"},{key:"featuredImage",label:(0,e.__)("Featured Image","itmaroon-ec-relate-blocks"),block:"core/image"},{key:"variants",label:(0,e.__)("Variants (Options)","itmaroon-ec-relate-blocks"),block:"itmar/design-title"},{key:"quantity",label:(0,e.__)("Quantity","itmaroon-ec-relate-blocks"),block:"itmar/design-text-ctrl"},{key:"quantityAvailable",label:(0,e.__)("Quantity Available","itmaroon-ec-relate-blocks"),block:"itmar/design-title"},{key:"price",label:(0,e.__)("Price","itmaroon-ec-relate-blocks"),block:"itmar/design-title"},{key:"compareAtPrice",label:(0,e.__)("Compare at Price (Original)","itmaroon-ec-relate-blocks"),block:"itmar/design-title"}],c="product"===t?r:o;return(0,n.jsx)(i.PanelBody,{title:(0,e.__)("Display Fields","itmaroon-ec-relate-blocks"),initialOpen:!0,children:c.map(e=>{return(0,n.jsx)("div",{className:"field_section",children:(0,n.jsx)(i.ToggleControl,{className:"field_choice",label:e.label,checked:(t=e.key,l.some(e=>e.key===t)),onChange:t=>((e,t,r,o)=>{t?l.some(t=>t.key===e)||a([...l,{key:e,label:r,block:o}]):a(l.filter(t=>t.key!==e))})(e.key,t,e.label,e.block)})},e.key);var t})})},s=window.wp.blockEditor,m=window.wp.element,d=window.wp.data;function b(e,t,l){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var l=e[Symbol.toPrimitive];if(void 0!==l){var a=l.call(e,t);if("object"!=typeof a)return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:l,enumerable:!0,configurable:!0,writable:!0}):e[t]=l,e}function k(e,t){var l=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),l.push.apply(l,a)}return l}function u(e){for(var t=1;t<arguments.length;t++){var l=null!=arguments[t]?arguments[t]:{};t%2?k(Object(l),!0).forEach(function(t){b(e,t,l[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(l)):k(Object(l)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(l,t))})}return e}var p=e=>e.reduce((e,t)=>(e.push(t),t.innerBlocks&&t.innerBlocks.length>0&&e.push(...p(t.innerBlocks)),e),[]),_=e=>({blockName:e.name,attributes:e.attributes,innerBlocks:e.innerBlocks.length>0?e.innerBlocks.map(_):[]}),g=e=>{var l=Array.isArray(e.innerBlocks)?e.innerBlocks.map(g):[];return(0,t.createBlock)(e.blockName,e.attributes,l)};const v=JSON.parse('{"UU":"itmar/cart-block"}');(0,t.registerBlockType)(v.UU,{icon:(0,n.jsx)(o,{}),description:(0,e.__)("We provide blocks to build EC sites in cooperation with various EC companies.","itmaroon-ec-relate-blocks"),edit:function({attributes:l,setAttributes:a,clientId:r}){const{selectedFields:o,numberOfItems:b,cartId:k,cartIconId:v,blocksAttributesArray:y}=l,[f,h]=(0,m.useState)(k),[w,O]=(0,m.useState)(v),B=((0,e.__)("For landscape images, odd numbers","itmaroon-ec-relate-blocks"),(0,e.__)("For landscape images, even numbers","itmaroon-ec-relate-blocks"),(0,e.__)("For portrait images, odd numbers","itmaroon-ec-relate-blocks"),(0,e.__)("For portrait images, even numbers","itmaroon-ec-relate-blocks"),(0,s.useBlockProps)()),j=(0,s.useInnerBlocksProps)(B,{allowedBlocks:["itmar/design-group","itmar/design-title","core/image","core/paragraph","itmar/design-button","itmar/design-text-ctrl"],template:[],templateLock:!1}),{innerBlocks:x,parentBlock:P}=(0,d.useSelect)(e=>{const{getBlocks:t,getBlockParents:l,getBlock:a}=e("core/block-editor"),o=l(r);return{innerBlocks:t(r),parentBlock:o.length>0?a(o[o.length-1]):null}},[r]),A=(0,m.useMemo)(()=>[],[]),C="itmar/slide-mv"===P?.name?parentId:r;((e,l,a,r,o,i,n,c,s)=>{var{replaceInnerBlocks:b}=(0,d.useDispatch)("core/block-editor"),k=(0,d.useSelect)(e=>e("core/block-editor").getBlock(n),[n]);(0,m.useEffect)(()=>{var a=e.length;if(a<o)for(var m=o-a,d=0;d<m;d++)e.push({});else e.splice(o);var v=e.map((e,a)=>{var o=(Array.isArray(e.innerBlocks)?p(e.innerBlocks):[]).map(e=>{var t;return null===(t=e.attributes)||void 0===t?void 0:t.className}).filter(Boolean).map(e=>{var t,l=e.match(/sp_field_([\w-]+)|(tax_[\w-]+)/);return l?null!==(t=l[1])&&void 0!==t?t:l[2]:null}).filter(Boolean),n=[...l,...r.map(e=>({key:"tax_".concat(e),label:e,block:"itmar/design-title"}))].filter(e=>!o.includes(e.key)).map(e=>{var l,a=((e,l)=>{var a,r,o,i,n,c,s={};switch(e.block){case"itmar/design-title":s={className:e.key.startsWith("tax_")?e.key:"sp_field_".concat(e.key),headingContent:"[".concat(e.label,"]")};break;case"core/paragraph":s={className:"itmar_ex_block sp_field_".concat(e.key),content:"[".concat(e.label,"]")};break;case"core/image":s={className:"itmar_ex_block sp_field_".concat(e.key),url:"".concat(null===(a=window[l])||void 0===a?void 0:a.plugin_url,"/assets/image/main_sample.png")};break;case"itmar/slide-mv":var m=(0,t.createBlock)("core/image",u({className:"itmar_ex_block",url:"".concat(null===(r=window[l])||void 0===r?void 0:r.plugin_url,"/assets/image/slide_sample.png")},{margin_val:{type:"object",default:{top:"0em",left:"0em",bottom:"0em",right:"0em"}},padding_val:{type:"object",default:{top:"0em",left:"0em",bottom:"0em",right:"0em"}}})),d=(0,t.getBlockType)("itmar/design-group"),b=null!==(o=null==d||null===(i=d.attributes)||void 0===i||null===(i=i.default_val)||void 0===i?void 0:i.default)&&void 0!==o?o:{},k=null!==(n=null==d||null===(c=d.attributes)||void 0===c||null===(c=c.mobile_val)||void 0===c?void 0:c.default)&&void 0!==n?n:{},p=(0,t.createBlock)("itmar/design-group",{default_val:u(u({},b),{},{width_val:"fit"}),mobile_val:u(u({},k),{},{width_val:"fit"})},[m]),v=_(p),y=Array.from({length:5},()=>g(v));s={attributes:{className:"sp_field_".concat(e.key)},slideBlocks:y};break;default:s={className:"sp_field_".concat(e.key),headingContent:"[".concat(e.label,"]")}}return s})(e,s),r=e.block,o=null!==(l=null==a?void 0:a.attributes)&&void 0!==l?l:a,i=Array.isArray(null==a?void 0:a.slideBlocks)?a.slideBlocks:[];return(0,t.createBlock)(r,o,i)}),c=l.map(e=>e.key),m=e=>e.map(e=>{var t,l=(null===(t=e.attributes)||void 0===t?void 0:t.className)||"",a=l.match(/sp_field_([a-zA-Z0-9_]+)/);if(l.startsWith("tax_")){var o=l.slice(4);r.includes(o)||(a=["tax_".concat(o),o])}var i=e.innerBlocks?m(e.innerBlocks):[];return!a||c.includes(a[1])?u(u({},e),{},{innerBlocks:i}):null}).filter(Boolean),d=[...Array.isArray(e.innerBlocks)?m(e.innerBlocks).map(g):[],...n];return(0,t.createBlock)("itmar/design-group",u(u({},e.attributes),{},{className:"unit_design_".concat(a),domType:i}),d)});c!==n&&v.push(k),b(c,v,!1)},[l,a,r])})(y,o,"cart",A,1,"div",r,C,"itmaroon_ec_relate_blocks");const I=(0,m.useRef)("");return(0,m.useEffect)(()=>{if(!x||0===x.length)return;const e=x.map(_),t=JSON.stringify(e);t!==I.current&&(I.current=t,a({blocksAttributesArray:e}))},[x,a]),(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(s.InspectorControls,{children:(0,n.jsxs)(i.PanelBody,{title:(0,e.__)("Cart setting","itmaroon-ec-relate-blocks"),children:[(0,n.jsx)(c,{fieldType:"cart",selectedFields:o,setSelectedFields:e=>a({selectedFields:e})}),(0,n.jsx)(i.PanelRow,{className:"itmar_post_blocks_pannel",children:(0,n.jsx)(i.RangeControl,{value:b,label:(0,e.__)("Display Num","itmaroon-ec-relate-blocks"),max:30,min:1,onChange:e=>a({numberOfItems:e})})}),(0,n.jsx)(i.PanelRow,{className:"itmar_post_blocks_pannel",children:(0,n.jsx)(i.TextControl,{label:(0,e.__)("Cart Modal ID","itmaroon-ec-relate-blocks"),value:f,onChange:e=>h(e),onBlur:()=>{a({cartId:f})}})}),(0,n.jsx)(i.PanelRow,{className:"itmar_post_blocks_pannel",children:(0,n.jsx)(i.TextControl,{label:(0,e.__)("Cart Icon ID","itmaroon-ec-relate-blocks"),value:w,onChange:e=>h(e),onBlur:()=>{a({cartIconId:w})}})})]})}),(0,n.jsx)("div",{...j})]})},save:function({attributes:e}){const{numberOfItems:t,cartId:l,cartIconId:a,selectedFields:r}=e;return(0,n.jsx)("div",{...s.useBlockProps.save(),"data-number_of_items":t,"data-cart_id":l,"data-cart_icon_id":a,"data-selected_fields":JSON.stringify(r),children:(0,n.jsx)("div",{className:"template_unit unit_hide",children:(0,n.jsx)(s.InnerBlocks.Content,{})})})}})}},l={};function a(e){var r=l[e];if(void 0!==r)return r.exports;var o=l[e]={exports:{}};return t[e](o,o.exports,a),o.exports}a.m=t,e=[],a.O=(t,l,r,o)=>{if(!l){var i=1/0;for(m=0;m<e.length;m++){for(var[l,r,o]=e[m],n=!0,c=0;c<l.length;c++)(!1&o||i>=o)&&Object.keys(a.O).every(e=>a.O[e](l[c]))?l.splice(c--,1):(n=!1,o<i&&(i=o));if(n){e.splice(m--,1);var s=r();void 0!==s&&(t=s)}}return t}o=o||0;for(var m=e.length;m>0&&e[m-1][2]>o;m--)e[m]=e[m-1];e[m]=[l,r,o]},a.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{var e={551:0,95:0};a.O.j=t=>0===e[t];var t=(t,l)=>{var r,o,[i,n,c]=l,s=0;if(i.some(t=>0!==e[t])){for(r in n)a.o(n,r)&&(a.m[r]=n[r]);if(c)var m=c(a)}for(t&&t(l);s<i.length;s++)o=i[s],a.o(e,o)&&e[o]&&e[o][0](),e[o]=0;return a.O(m)},l=globalThis.webpackChunkitmaroon_ec_relate_bloks=globalThis.webpackChunkitmaroon_ec_relate_bloks||[];l.forEach(t.bind(null,0)),l.push=t.bind(null,l.push.bind(l))})();var r=a.O(void 0,[95],()=>a(86));r=a.O(r)})();